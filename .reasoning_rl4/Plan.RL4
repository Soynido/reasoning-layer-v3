---
version: 1.7
original_version: 1.0
updated: 2025-11-12T15:45:00.000Z
confidence: 0.97
baseline_saved: true
deviation_mode: ui_driven
commit: pending
vsix: reasoning-layer-rl4-2.7.0-adr-detection.vsix
snapshot_validated: true
milestone: UI-Driven Deviation Mode Complete
---

# RL4 Strategic Plan

## Phase
E4 - Smart UI with LLM-Validated KPIs

## Goal
Transform RL4 UI from "data display" to "actionable insights" via LLM-validated Smart Components.

## Timeline
- Phase E3.3: âœ… COMPLETE (2025-11-12)
- Phase E4 Start: 2025-11-12 (15:30)
- Target: 2025-11-16 (4 days)
- Current: Day 1/4 (95% confidence)
- Status: ðŸŸ¢ Excellent momentum

**Phase E3.3 Objectives (COMPLETE):**
1. âœ… Simplify UI to 1 button ("Generate Context Snapshot")
2. âœ… Eliminate fake/static data (patterns, forecasts, goals)
3. âœ… Establish agent feedback loop (prompt â†’ agent â†’ .RL4 files â†’ RL4 parses)
4. âœ… Create persistent state files (Plan/Tasks/Context/ADRs.RL4)
5. âœ… Historical compression (30 days â†’ 2KB JSON)
6. âœ… ADR auto-detection (commit scoring)
7. âœ… Deviation Guard (baseline tracking)

**Phase E4 Objectives (ACTIVE):**
1. [x] UI-Driven Deviation Mode (ADR-009) âœ… DONE â€” User chooses perception angle
2. [ ] Smart UI Components (ADR-006) â€” LLM-validated insights, not raw data
3. [ ] Real-time .RL4 file refresh (FileWatchers â†’ UI update)
4. [ ] Interactive ADR timeline visualization

**Milestones Achieved (Day 1):**
- âœ… UnifiedPromptBuilder.ts created (generates single prompt)
- âœ… BlindSpotDataLoader.ts (loads real timeline/git/health)
- âœ… ADRParser.ts (parses agent-proposed ADRs)
- âœ… PlanTasksContextParser.ts (reads/validates .RL4 files)
- âœ… FileWatchers integrated (monitors .RL4 changes)
- âœ… ADR-005 parser regex fixed (ADR-XXX: format)
- âœ… HistorySummarizer.ts (30 days â†’ 2KB JSON compression)
- âœ… BiasCalculator.ts (deviation detection from baseline)
- âœ… ADRSignalEnricher.ts (auto-detect ADRs from commits)
- âœ… Deviation Guard integrated (STRICT mode active)
- âœ… ADR-005, ADR-006, ADR-007 documented
- âœ… Stable commit: 140406e
- âœ… Extension installed: v2.7.0-adr-detection

**Success Criteria:**
- [x] UI reduced to single action
- [x] Prompt generation functional
- [x] Real-time data only (cycles, commits, health)
- [x] Agent can update Plan/Tasks/Context.RL4
- [x] RL4 detects changes and re-parses (FileWatchers active)
- [x] Confidence/Bias metrics calculated (71% / 0%)

**Next Phase (E4): Smart UI with LLM-Validated KPIs**
- Rationale: See ADR-006 (2025-11-12)
- Problem: Raw stats meaningless without context ("Et alors ? C'est grave ?")
- Solution: UI displays LLM insights, not raw data
- Architecture: Kernel (dumb) â†’ Prompt (compress) â†’ LLM (validate) â†’ .RL4 (persist) â†’ UI (smart display)
- Components:
  - NextStepsCard (Tasks.RL4 â†’ P0 tasks)
  - ConfidenceGauge (Plan.RL4 â†’ 71% metric)
  - BlockersAlert (Tasks.RL4 â†’ blockers)
  - CognitiveLoadMeter (Context.RL4 â†’ observations)
  - TimelineChart (HistorySummary â†’ trends)
  - DecisionHistory (ADRs.RL4 â†’ ADR timeline)
- Constraint: Single CTA remains ("Generate Context Snapshot")
- Success: User knows WHAT TO DO, not just "what happened"
