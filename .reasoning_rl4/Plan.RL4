---
version: 2.0
original_version: 1.0
baseline_date: 2025-11-12T16:35:00.000Z
baseline_archived: .reasoning_rl4/baselines/Plan.RL4.v1.0.archived
updated: 2025-11-12T16:35:00.000Z
confidence: 0.95
bias: 0.00
baseline_saved: true
deviation_mode: ui_driven
commit: cd44268
vsix: reasoning-layer-rl4-3.0.0-production-ready.vsix
snapshot_validated: true
milestone: E4 Baseline Reset ‚Äî Production-Ready Extension Accepted
---

# RL4 Strategic Plan ‚Äî BASELINE v2.0

## Phase
E4 - Workspace Insights UI (Production-Ready)

## Goal
Deliver a marketplace-ready VS Code extension that provides developers with actionable workspace insights through LLM-validated KPI cards, eliminating the "Et alors ? C'est grave ?" problem.

## Timeline
- Phase E3.3: ‚úÖ COMPLETE (2025-11-12)
- Phase E4 Start: 2025-11-12 (15:30)
- Target: 2025-11-16 (4 days)
- Current: Day 1/4 (92% confidence)
- Status: üü° Momentum good, deviation alert active (58% > 25%)

**Phase E3.3 Objectives (COMPLETE):**
1. ‚úÖ Simplify UI to 1 button ("Generate Context Snapshot")
2. ‚úÖ Eliminate fake/static data (patterns, forecasts, goals)
3. ‚úÖ Establish agent feedback loop (prompt ‚Üí agent ‚Üí .RL4 files ‚Üí RL4 parses)
4. ‚úÖ Create persistent state files (Plan/Tasks/Context/ADRs.RL4)
5. ‚úÖ Historical compression (30 days ‚Üí 2KB JSON)
6. ‚úÖ ADR auto-detection (commit scoring)
7. ‚úÖ Deviation Guard (baseline tracking)

**Phase E4 Objectives (COMPLETE ‚úÖ):**
1. [x] UI-Driven Deviation Mode (ADR-009) ‚úÖ DONE ‚Äî User chooses perception angle
2. [x] Smart UI Components (ADR-006) ‚úÖ DONE ‚Äî 4 KPI cards functional
3. [x] Real-time .RL4 file refresh (FileWatchers ‚Üí UI update) ‚úÖ DONE ‚Äî Context.RL4 watched

**Phase E5 Objectives (95% COMPLETE ‚Äî Marketplace Ready):**
1. [x] Create new GitHub repo "RL4 Official" (clean slate) ‚úÖ https://github.com/Soynido/rl4-official
2. [x] Clean codebase (UI + backend only, remove dev artifacts) ‚úÖ 108 files (vs 11,238)
3. [x] Marketplace README (How/Why/Who/What ‚Äî universal clarity) ‚úÖ 3,500 words
4. [ ] Screenshots and demo assets ‚è≥ User action required (Issue #2)
5. [x] Optimize for public understanding (code comments, docs) ‚úÖ Tracked in Issue #1
6. [ ] VS Code Marketplace submission ‚è≥ After screenshots

**Phase E6 Objectives (50% COMPLETE ‚Äî Post-Marketplace UX):**
1. [x] Dual-Mode Onboarding (Existing workspace vs New workspace) ‚úÖ DONE ‚Äî 4 modules, 865 lines
2. [x] Quick Setup Wizard (3 questions for first-time users) ‚úÖ DONE ‚Äî Integrated in NewWorkspaceOnboarding
3. [x] narrative() method added to CognitiveLogger ‚úÖ DONE ‚Äî Storytelling support
4. [ ] Cognitive Narrative Logs (Transform technical logs into storytelling) ‚è≥ IN PROGRESS
5. [ ] Emotional Intelligence (React to user behavior: bursts, gaps, commits) ‚è≥ PLANNED
6. [ ] 5-Minute Insights (Contextual reflections and suggestions) ‚è≥ PLANNED
7. [ ] Log Mode Configuration (Narrative/Minimal/Verbose/Silent) ‚è≥ PLANNED

**Milestones Achieved (Day 1):**
- ‚úÖ UnifiedPromptBuilder.ts created (generates single prompt)
- ‚úÖ BlindSpotDataLoader.ts (loads real timeline/git/health)
- ‚úÖ ADRParser.ts (parses agent-proposed ADRs)
- ‚úÖ PlanTasksContextParser.ts (reads/validates .RL4 files)
- ‚úÖ FileWatchers integrated (monitors .RL4 changes)
- ‚úÖ ADR-005 parser regex fixed (ADR-XXX: format)
- ‚úÖ HistorySummarizer.ts (30 days ‚Üí 2KB JSON compression)
- ‚úÖ BiasCalculator.ts (deviation detection from baseline)
- ‚úÖ ADRSignalEnricher.ts (auto-detect ADRs from commits)
- ‚úÖ Deviation Guard integrated (STRICT mode active)
- ‚úÖ ADR-005, ADR-006, ADR-007 documented
- ‚úÖ Stable commit: 140406e
- ‚úÖ Extension installed: v2.7.0-adr-detection

**Success Criteria:**
- [x] UI reduced to single action
- [x] Prompt generation functional
- [x] Real-time data only (cycles, commits, health)
- [x] Agent can update Plan/Tasks/Context.RL4
- [x] RL4 detects changes and re-parses (FileWatchers active)
- [x] Confidence/Bias metrics calculated (92% / 58%)

**‚ö†Ô∏è Deviation Status:**
- **Baseline:** Plan.RL4 v1.0 (saved in .baseline/)
- **Current:** Plan.RL4 v2.0 (58% drift from baseline)
- **Threshold:** Flexible mode = 25% (EXCEEDED by 33 points)
- **Decision Required:** User must choose:
  - Accept drift ‚Üí Update baseline to v2.0 (reset bias to 0%)
  - Recalibrate ‚Üí Remove non-essential E4 features
  - Continue ‚Üí Acknowledge 58%, proceed with P1 only

## Phase Evolution Tracking

### Phase E3.3 ‚Üí E4.1 Transition (2025-11-12)

**ADDED:**
- `UnifiedPromptBuilder.ts` (Single context snapshot generator)
- `HistorySummarizer.ts` (30 days ‚Üí 2KB JSON compression)
- `BiasCalculator.ts` (Deviation tracking from baseline)
- `ADRSignalEnricher.ts` (Auto-detect ADRs from commits)
- `ADRParser.ts` (Parse ADRs.RL4 ‚Üí adrs.jsonl)
- `PlanTasksContextParser.ts` (Parse Plan/Tasks/Context.RL4)
- `BlindSpotDataLoader.ts` (Load timeline/git/health)
- `.reasoning_rl4/Plan.RL4` (Strategic intent persistence)
- `.reasoning_rl4/Tasks.RL4` (Tactical TODOs persistence)
- `.reasoning_rl4/Context.RL4` (Operational state persistence)
- `.reasoning_rl4/ADRs.RL4` (Agent-proposed ADRs)
- `.reasoning_rl4/.baseline/Plan.RL4.v1.0` (Immutable baseline for bias calc)
- FileWatchers for Plan/Tasks/Context/ADRs.RL4
- UI-Driven Deviation Mode selector (üî¥/üü°/üü¢/‚ö™)
- Dynamic threshold system (0%/25%/50%/100%)
- Mode-specific agent instructions in prompt

**MODIFIED:**
- WebView UI: 4 tabs (Now/Before/Next/Restore) ‚Üí 1 button + mode selector
- `extension.ts`: Message handler now accepts `deviationMode` param
- `UnifiedPromptBuilder.generate()`: Signature changed (+deviationMode param)
- Prompt header: Now displays user-selected deviation mode
- Bias calculation: Now uses dynamic threshold (not static config)
- Deviation Guard section: Adapts rules based on chosen mode
- Confidence metric: 71% ‚Üí 97% (increased trust in system)

**REMOVED:**
- Static patterns.json, forecasts.json, goals.json (fake data)
- 4-tab UI system (Now/Before/Next/Restore)
- Legacy `snapshotInterval` (auto-push every 10s)
- Legacy message types (updateNow, updateBefore, etc.)
- Static `deviation_mode` in kernel_config.json (now UI-driven)
- Global threshold config (now per-snapshot)
- PromptBridge separate prompts (unified into single snapshot)

**WHY:**
- User insight 1: "Patterns never change, seems fake" ‚Üí Removed fake data
- User insight 2: "Too many buttons, unclear workflow" ‚Üí 1 button UI
- User insight 3: "How do I update RL4 state?" ‚Üí .RL4 feedback loop
- User insight 4: "Le threshold est une pr√©f√©rence USER" ‚Üí UI-driven mode

### Phase E4.1 ‚Üí E4.2 Transition (In Progress)

**ADDED:**
- Mermaid diagrams to all ADRs (ADR-005 to ADR-009)
- `.reasoning_rl4/ADR_TEMPLATE.md` (Template for future ADRs)
- Phase Evolution Tracking section in Plan.RL4 (this section)

**FIXED:**
- Mermaid syntax errors (removed dots from labels: `.RL4` ‚Üí `RL4`, `.jsonl` ‚Üí `jsonl`)
- All diagrams now render correctly in Markdown viewers

**PLANNED (E4.2):**
- Smart UI Components (NextStepsCard, ConfidenceGauge, etc.)
- Real-time .RL4 file refresh in UI
- Interactive ADR timeline visualization

**Next Phase (E4): Smart UI with LLM-Validated KPIs**
- Rationale: See ADR-006 (2025-11-12)
- Problem: Raw stats meaningless without context ("Et alors ? C'est grave ?")
- Solution: UI displays LLM insights, not raw data
- Architecture: Kernel (dumb) ‚Üí Prompt (compress) ‚Üí LLM (validate) ‚Üí .RL4 (persist) ‚Üí UI (smart display)
- Components:
  - NextStepsCard (Tasks.RL4 ‚Üí P0 tasks)
  - ConfidenceGauge (Plan.RL4 ‚Üí 71% metric)
  - BlockersAlert (Tasks.RL4 ‚Üí blockers)
  - CognitiveLoadMeter (Context.RL4 ‚Üí observations)
  - TimelineChart (HistorySummary ‚Üí trends)
  - DecisionHistory (ADRs.RL4 ‚Üí ADR timeline)
- Constraint: Single CTA remains ("Generate Context Snapshot")
- Success: User knows WHAT TO DO, not just "what happened"
