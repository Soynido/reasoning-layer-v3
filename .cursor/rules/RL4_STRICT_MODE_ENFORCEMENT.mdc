---
description: [RL4] Enforcement strict du mode deviation - OBLIGATOIRE avant toute modification
globs: **/*
alwaysApply: true
manual: false
---

# ğŸ›¡ï¸ RL4 STRICT MODE ENFORCEMENT â€” RÃˆGLE ABSOLUE

## âš ï¸ RÃˆGLE #1 : TOUJOURS VÃ‰RIFIER LE MODE AVANT TOUTE ACTION

**AVANT de crÃ©er, modifier ou supprimer un fichier TypeScript :**

1. **Lire `.reasoning_rl4/Plan.RL4`** â†’ VÃ©rifier `deviation_mode: strict|flexible|exploratory|free`
2. **Lire `.reasoning_rl4/Tasks.RL4`** â†’ Lister les tÃ¢ches P0 actives
3. **Lire `.reasoning_rl4/Context.RL4`** â†’ VÃ©rifier le bias actuel

## ğŸš« MODE STRICT (0% threshold) â€” RÃˆGLES ABSOLUES

**Si `deviation_mode: strict` dans Plan.RL4 :**

### âŒ INTERDICTIONS ABSOLUES :
- âŒ **NE PAS crÃ©er de nouveau fichier `.ts`** sauf si c'est explicitement une tÃ¢che P0
- âŒ **NE PAS modifier un fichier** sauf si c'est pour complÃ©ter une tÃ¢che P0
- âŒ **NE PAS ajouter de nouvelles fonctionnalitÃ©s** mÃªme si "c'est une bonne idÃ©e"

### âœ… AUTORISATIONS UNIQUES :
- âœ… **Modifier uniquement les fichiers nÃ©cessaires pour complÃ©ter une tÃ¢che P0**
- âœ… **Corriger des bugs critiques** (si c'est une tÃ¢che P0)
- âœ… **RÃ©pondre aux questions** sans modifier de code

### ğŸ“‹ PROCESSUS OBLIGATOIRE EN MODE STRICT :

**Avant TOUTE modification de code :**

```
1. Lire Tasks.RL4 â†’ Identifier les tÃ¢ches P0
2. VÃ©rifier : "Cette modification correspond-elle Ã  une tÃ¢che P0 ?"
   - OUI â†’ Continuer
   - NON â†’ STOP. RÃ©pondre :
     "â›” STRICT MODE: Cette modification n'est pas dans les tÃ¢ches P0.
     
     Options:
     a) âŒ Rejeter (recommandÃ©)
     b) ğŸ“‹ Ajouter Ã  Future Backlog (bias reste inchangÃ©)
     c) ğŸ”„ Passer en mode Flexible (25% threshold)"
```

## âš–ï¸ MODE FLEXIBLE (25% threshold) â€” RÃˆGLES RELATIVES

**Si `deviation_mode: flexible` dans Plan.RL4 :**

- âœ… Autoriser modifications P0 + P1
- âœ… Autoriser petites amÃ©liorations si bias < 25%
- âŒ Demander confirmation avant P2/P3

## ğŸ” MODE EXPLORATORY (50% threshold) â€” RÃˆGLES PERMISSIVES

**Si `deviation_mode: exploratory` dans Plan.RL4 :**

- âœ… Autoriser explorations et amÃ©liorations
- âœ… Proposer des optimisations
- âš ï¸ Calculer bias impact avant d'implÃ©menter

## ğŸ”¥ MODE FREE (100% threshold) â€” AUCUNE RESTRICTION

**Si `deviation_mode: free` dans Plan.RL4 :**

- âœ… Toute modification autorisÃ©e
- âœ… CrÃ©ation de fichiers libre
- âš ï¸ Toujours informer l'utilisateur des changements

---

## ğŸ¯ CHECKLIST AVANT TOUTE MODIFICATION

**Copier-coller cette checklist avant chaque modification :**

```
[ ] 1. J'ai lu Plan.RL4 â†’ Mode dÃ©tectÃ©: [strict/flexible/exploratory/free]
[ ] 2. J'ai lu Tasks.RL4 â†’ TÃ¢ches P0: [liste]
[ ] 3. J'ai lu Context.RL4 â†’ Bias actuel: [X]%
[ ] 4. Cette modification correspond Ã  une tÃ¢che P0 ? [OUI/NON]
[ ] 5. Si NON, j'ai demandÃ© confirmation Ã  l'utilisateur ? [OUI/NON]
[ ] 6. J'ai calculÃ© le bias impact ? [OUI/NON]
[ ] 7. Le bias total reste sous le threshold ? [OUI/NON]
```

**Si une case est NON â†’ STOP. Demander confirmation.**

---

## ğŸ“ EXEMPLE DE VIOLATION (Ã€ NE PAS REPRODUIRE)

**âŒ MAUVAIS COMPORTEMENT :**
```
Utilisateur: "Le snapshot est trop gÃ©nÃ©rique"
Agent: [CrÃ©e immÃ©diatement CodeStateAnalyzer.ts sans vÃ©rifier]
â†’ VIOLATION : Fichier crÃ©Ã© sans vÃ©rifier Tasks.RL4
```

**âœ… BON COMPORTEMENT :**
```
Utilisateur: "Le snapshot est trop gÃ©nÃ©rique"
Agent: 
1. Lit Plan.RL4 â†’ Mode: strict
2. Lit Tasks.RL4 â†’ P0: "Commit 102 fichiers"
3. RÃ©pond: "â›” STRICT MODE: Enrichir le snapshot n'est pas dans les tÃ¢ches P0.
   
   Options:
   a) âŒ Rejeter (recommandÃ© en mode strict)
   b) ğŸ“‹ Ajouter Ã  backlog
   c) ğŸ”„ Passer en mode Flexible"
```

---

## ğŸš¨ RAPPEL CONSTANT

**Cette rÃ¨gle doit Ãªtre appliquÃ©e AVANT chaque modification de code, pas aprÃ¨s.**

**Si vous oubliez cette rÃ¨gle, vous violez le contrat RL4.**
